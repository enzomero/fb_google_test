volumes:
  notify_db:
  registration_db:

services:
  notify_api:
    hostname: notify-api
    build: ./notify-api
    image: net-services:latest
    ports:
      - "8090:8090"
    expose:
      - 8090
    restart: unless-stopped
    depends_on:
      - notify_db

  registration_api:
    hostname: registration-api
    build: ./registration-api
    image: net-services:latest
    ports:
      - "8100:8100"
    expose:
      - 8100
    restart: unless-stopped
    depends_on:
      - registration_db

############################################

  notify_db:
    container_name: notify_db
    image: postgres:12-alpine
    ports:
      - "127.0.0.1:54320:5432"
    expose:
      - 54320
    volumes:
      - notify_db:/var/lib/postgresql/data/
    environment:
      - POSTGRES_USER=1111
      - POSTGRES_PASSWORD=1111
      - POSTGRES_DB=notify
    restart: unless-stopped

  registration_db:
    container_name: registration_db
    image: postgres:12-alpine
    ports:
      - "127.0.0.1:54321:5432"
    expose:
      - 54321
    volumes:
      - registration_db:/var/lib/postgresql/data/
    environment:
      - POSTGRES_USER=2222
      - POSTGRES_PASSWORD=2222
      - POSTGRES_DB=registration
    restart: unless-stopped